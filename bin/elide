#!/bin/bash

last=/dev/null
for f in code/*; do
	tail -1 $last | (
		read a b i p
		next=$(rax2 $a+$((${#b}/2)) | xargs printf 'code/%06x\n')
		[ $next = $f ] && echo $last $f
	)
	last=$f
done | tac | while read a b; do
	cat $b >> $a && rm $b
done
