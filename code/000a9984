0x000a9984    ae0405       ldx 0x0504
0x000a9987    adb700       lda 0x00b7
0x000a998a    290080       and #0x8000
0x000a998d    f003         beq 0x0a9992
0x000a998f    a90300       lda #0x0003
0x000a9992    8500         sta 0x00
0x000a9994    bda203       lda 0x03a2,x
0x000a9997    18           clc
0x000a9998    e500         sbc 0x00
0x000a999a    f006         beq 0x0a99a2
0x000a999c    9004         bcc 0x0a99a2
0x000a999e    9da203       sta 0x03a2,x
0x000a99a1    60           rts
0x000a99a2    9ea203       stz 0x03a2,x
0x000a99a5    18           clc
0x000a99a6    60           rts
0x000a99a7    08           php
0x000a99a8    c220         rep #0x20
0x000a99aa    ada603       lda 0x03a6
0x000a99ad    d003         bne 0x0a99b2
0x000a99af    4c0b9a       jmp 0x9a0b
0x000a99b2    ad7003       lda 0x0370
0x000a99b5    f016         beq 0x0a99cd
0x000a99b7    3a           dec a
0x000a99b8    0a           asl a
0x000a99b9    a8           tay
0x000a99ba    e220         sep #0x20
0x000a99bc    b95003       lda 0x0350,y
0x000a99bf    18           clc
0x000a99c0    6908         adc #0x08
0x000a99c2    cd5101       cmp 0x0151
0x000a99c5    9003         bcc 0x0a99ca
0x000a99c7    ad5101       lda 0x0151
0x000a99ca    995003       sta 0x0350,y
0x000a99cd    c220         rep #0x20
0x000a99cf    ad6e03       lda 0x036e
0x000a99d2    f016         beq 0x0a99ea
0x000a99d4    3a           dec a
0x000a99d5    0a           asl a
0x000a99d6    a8           tay
0x000a99d7    e220         sep #0x20
0x000a99d9    b94003       lda 0x0340,y
0x000a99dc    18           clc
0x000a99dd    6908         adc #0x08
0x000a99df    cd5001       cmp 0x0150
0x000a99e2    9003         bcc 0x0a99e7
0x000a99e4    ad5001       lda 0x0150
0x000a99e7    994003       sta 0x0340,y
0x000a99ea    c220         rep #0x20
0x000a99ec    22128a0a     jsr 0x0a8a12
0x000a99f0    2286840a     jsr 0x0a8486
0x000a99f4    22f3840a     jsr 0x0a84f3
0x000a99f8    ad6e03       lda 0x036e
0x000a99fb    0d7003       ora 0x0370
0x000a99fe    f005         beq 0x0a9a05
0x000a9a00    cea603       dec 0x03a6
0x000a9a03    d006         bne 0x0a9a0b
0x000a9a05    9ca603       stz 0x03a6
0x000a9a08    205499       jsr 0x9954
0x000a9a0b    28           plp
0x000a9a0c    6b           rtl
0x000a9a0d    08           php
0x000a9a0e    e220         sep #0x20
0x000a9a10    ad7203       lda 0x0372
0x000a9a13    29e0         and #0xe0
0x000a9a15    c920         cmp #0x20
0x000a9a17    d076         bne 0x0a9a8f
0x000a9a19    ad6603       lda 0x0366
0x000a9a1c    0a           asl a
0x000a9a1d    0a           asl a
0x000a9a1e    0a           asl a
0x000a9a1f    f06e         beq 0x0a9a8f
0x000a9a21    8500         sta 0x00
0x000a9a23    adf103       lda 0x03f1
0x000a9a26    4a           lsr a
0x000a9a27    38           sec
0x000a9a28    e500         sbc 0x00
0x000a9a2a    8f03e47e     sta 0x7ee403
0x000a9a2e    3a           dec a
0x000a9a2f    8f00e47e     sta 0x7ee400
0x000a9a33    18           clc
0x000a9a34    6908         adc #0x08
0x000a9a36    8f00e87e     sta 0x7ee800
0x000a9a3a    1a           inc a
0x000a9a3b    8f03e87e     sta 0x7ee803
0x000a9a3f    a500         lda 0x00
0x000a9a41    8f06e87e     sta 0x7ee806
0x000a9a45    8f09e87e     sta 0x7ee809
0x000a9a49    18           clc
0x000a9a4a    6910         adc #0x10
0x000a9a4c    8f06e47e     sta 0x7ee406
0x000a9a50    8f09e47e     sta 0x7ee409
0x000a9a54    adf003       lda 0x03f0
0x000a9a57    8f07e47e     sta 0x7ee407
0x000a9a5b    8f0ae47e     sta 0x7ee40a
0x000a9a5f    38           sec
0x000a9a60    e910         sbc #0x10
0x000a9a62    8f07e87e     sta 0x7ee807
0x000a9a66    8f0ae87e     sta 0x7ee80a
0x000a9a6a    ad6403       lda 0x0364
0x000a9a6d    f020         beq 0x0a9a8f
0x000a9a6f    0a           asl a
0x000a9a70    0a           asl a
0x000a9a71    0a           asl a
0x000a9a72    0a           asl a
0x000a9a73    6df003       adc 0x03f0
0x000a9a76    8f08e47e     sta 0x7ee408
0x000a9a7a    8f0be47e     sta 0x7ee40b
0x000a9a7e    18           clc
0x000a9a7f    6910         adc #0x10
0x000a9a81    8f08e87e     sta 0x7ee808
0x000a9a85    8f0be87e     sta 0x7ee80b
0x000a9a89    a910         lda #0x10
0x000a9a8b    8569         sta 0x69
0x000a9a8d    28           plp
0x000a9a8e    6b           rtl
0x000a9a8f    a900         lda #0x00
0x000a9a91    8f06e47e     sta 0x7ee406
0x000a9a95    8f06e87e     sta 0x7ee806
0x000a9a99    6469         stz 0x69
0x000a9a9b    28           plp
0x000a9a9c    6b           rtl
0x000a9a9d    08           php
0x000a9a9e    c220         rep #0x20
0x000a9aa0    a90400       lda #0x0004
0x000a9aa3    850c         sta 0x0c
0x000a9aa5    a9e000       lda #0x00e0
0x000a9aa8    8504         sta 0x04
0x000a9aaa    2c4008       bit 0x0840
0x000a9aad    e220         sep #0x20
0x000a9aaf    3013         bmi 0x0a9ac4
0x000a9ab1    7013         bvs 0x0a9ac6
0x000a9ab3    ad4008       lda 0x0840
0x000a9ab6    18           clc
0x000a9ab7    650c         adc 0x0c
0x000a9ab9    c504         cmp 0x04
0x000a9abb    9018         bcc 0x0a9ad5
0x000a9abd    a980         lda #0x80
0x000a9abf    14c3         trb 0xc3
0x000a9ac1    0c4108       tsb 0x0841
0x000a9ac4    28           plp
0x000a9ac5    6b           rtl
0x000a9ac6    ad4008       lda 0x0840
0x000a9ac9    38           sec
0x000a9aca    e50c         sbc 0x0c
0x000a9acc    1007         bpl 0x0a9ad5
0x000a9ace    a980         lda #0x80
0x000a9ad0    0c4108       tsb 0x0841
0x000a9ad3    a901         lda #0x01
0x000a9ad5    8d4008       sta 0x0840
0x000a9ad8    c220         rep #0x20
0x000a9ada    ad4008       lda 0x0840
0x000a9add    29ff00       and #0x00ff
0x000a9ae0    8506         sta 0x06
0x000a9ae2    a504         lda 0x04
0x000a9ae4    eb           swa
0x000a9ae5    8d0442       sta 0x4204
0x000a9ae8    e220         sep #0x20
0x000a9aea    a506         lda 0x06
0x000a9aec    8d0642       sta 0x4206
0x000a9aef    08           php
0x000a9af0    28           plp
0x000a9af1    08           php
0x000a9af2    28           plp
0x000a9af3    c220         rep #0x20
0x000a9af5    ad1442       lda 0x4214
0x000a9af8    8502         sta 0x02
0x000a9afa    a504         lda 0x04
0x000a9afc    0a           asl a
0x000a9afd    6504         adc 0x04
0x000a9aff    850a         sta 0x0a
0x000a9b01    a504         lda 0x04
0x000a9b03    38           sec
0x000a9b04    e506         sbc 0x06
0x000a9b06    8508         sta 0x08
0x000a9b08    0a           asl a
0x000a9b09    6508         adc 0x08
0x000a9b0b    8508         sta 0x08
0x000a9b0d    a20000       ldx #0x0000
0x000a9b10    e220         sep #0x20
0x000a9b12    a583         lda 0x83
0x000a9b14    8008         bra 0x0a9b1e
0x000a9b16    9f01fc7e     sta 0x7efc01,x
0x000a9b1a    3a           dec a
0x000a9b1b    e8           inx
0x000a9b1c    e8           inx
0x000a9b1d    e8           inx
0x000a9b1e    e408         cpx 0x08
0x000a9b20    90f4         bcc 0x0a9b16
0x000a9b22    8501         sta 0x01
0x000a9b24    6400         stz 0x00
0x000a9b26    8015         bra 0x0a9b3d
0x000a9b28    a500         lda 0x00
0x000a9b2a    18           clc
0x000a9b2b    6502         adc 0x02
0x000a9b2d    38           sec
0x000a9b2e    e90001       sbc #0x0100
0x000a9b31    8500         sta 0x00
0x000a9b33    e220         sep #0x20
0x000a9b35    eb           swa
0x000a9b36    9f01fc7e     sta 0x7efc01,x
0x000a9b3a    e8           inx
0x000a9b3b    e8           inx
0x000a9b3c    e8           inx
0x000a9b3d    e40a         cpx 0x0a
0x000a9b3f    c220         rep #0x20
0x000a9b41    90e5         bcc 0x0a9b28
0x000a9b43    a90000       lda #0x0000
0x000a9b46    9f00fc7e     sta 0x7efc00,x
0x000a9b4a    28           plp
0x000a9b4b    6b           rtl
0x000a9b4c    08           php
0x000a9b4d    c220         rep #0x20
0x000a9b4f    29ff40       and #0x40ff
0x000a9b52    8d4008       sta 0x0840
0x000a9b55    e220         sep #0x20
0x000a9b57    a980         lda #0x80
0x000a9b59    14c3         trb 0xc3
0x000a9b5b    a20000       ldx #0x0000
0x000a9b5e    a981         lda #0x81
0x000a9b60    9f00fc7e     sta 0x7efc00,x
0x000a9b64    e8           inx
0x000a9b65    e8           inx
0x000a9b66    e8           inx
0x000a9b67    e0a002       cpx #0x02a0
0x000a9b6a    90f4         bcc 0x0a9b60
0x000a9b6c    a900         lda #0x00
0x000a9b6e    9f00fc7e     sta 0x7efc00,x
0x000a9b72    229d9a0a     jsr 0x0a9a9d
0x000a9b76    28           plp
0x000a9b77    6b           rtl
0x000a9b78    08           php
0x000a9b79    e220         sep #0x20
0x000a9b7b    a980         lda #0x80
0x000a9b7d    14c3         trb 0xc3
0x000a9b7f    a902         lda #0x02
0x000a9b81    8d7043       sta 0x4370
0x000a9b84    a90f         lda #0x0f
0x000a9b86    8d7143       sta 0x4371
0x000a9b89    a900         lda #0x00
0x000a9b8b    8d7243       sta 0x4372
0x000a9b8e    a9fc         lda #0xfc
0x000a9b90    8d7343       sta 0x4373
0x000a9b93    a97e         lda #0x7e
0x000a9b95    8d7443       sta 0x4374
0x000a9b98    c220         rep #0x20
0x000a9b9a    a9f49b       lda #0x9bf4
0x000a9b9d    8500         sta 0x00
0x000a9b9f    a90a00       lda #0x000a
0x000a9ba2    8502         sta 0x02
0x000a9ba4    a90000       lda #0x0000
0x000a9ba7    8fa0fe7e     sta 0x7efea0
0x000a9bab    a0be01       ldy #0x01be
0x000a9bae    a29d02       ldx #0x029d
0x000a9bb1    a90100       lda #0x0001
0x000a9bb4    9f00fc7e     sta 0x7efc00,x
0x000a9bb8    b700         lda [0x00],y
0x000a9bba    9f01fc7e     sta 0x7efc01,x
0x000a9bbe    88           dey
0x000a9bbf    88           dey
0x000a9bc0    ca           dex
0x000a9bc1    ca           dex
0x000a9bc2    ca           dex
0x000a9bc3    10ec         bpl 0x0a9bb1
0x000a9bc5    a90080       lda #0x8000
0x000a9bc8    8d4008       sta 0x0840
0x000a9bcb    28           plp
0x000a9bcc    6b           rtl
