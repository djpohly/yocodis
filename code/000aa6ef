0x000aa6ef    a94003       lda #0x0340
0x000aa6f2    18           clc
0x000aa6f3    6502         adc 0x02
0x000aa6f5    8502         sta 0x02
0x000aa6f7    bdf003       lda 0x03f0,x
0x000aa6fa    7202         adc (0x02)
0x000aa6fc    29ff00       and #0x00ff
0x000aa6ff    8504         sta 0x04
0x000aa701    2400         bit 0x00
0x000aa703    702d         bvs 0x0aa732
0x000aa705    bdcc03       lda 0x03cc,x
0x000aa708    1da803       ora 0x03a8,x
0x000aa70b    d023         bne 0x0aa730
0x000aa70d    ad2a05       lda 0x052a
0x000aa710    f018         beq 0x0aa72a
0x000aa712    ac2805       ldy 0x0528
0x000aa715    e220         sep #0x20
0x000aa717    b92f05       lda 0x052f,y
0x000aa71a    2401         bit 0x01
0x000aa71c    3003         bmi 0x0aa721
0x000aa71e    b92e05       lda 0x052e,y
0x000aa721    38           sec
0x000aa722    e504         sbc 0x04
0x000aa724    900a         bcc 0x0aa730
0x000aa726    c910         cmp #0x10
0x000aa728    9006         bcc 0x0aa730
0x000aa72a    20dfaa       jsr 0xaadf
0x000aa72d    2015a8       jsr 0xa815
0x000aa730    28           plp
0x000aa731    6b           rtl
